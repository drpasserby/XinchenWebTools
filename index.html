<!DOCTYPE html>
<html lang="zh-CN">
<html>
	<head>
		<meta charset="utf-8" />
		<title>心尘工具箱</title>
		<link rel="icon" href="https://my.wulvxinchen.cn/tools/logo.ico" type="image/x-icon">
		<script src="js/vue.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/axios.min.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="./css/index.css">
	</head>
	<body>
		<div id="main">
			<div id="header">
				<h1 class="mainTitle">心尘的工具集</h1>
				<span style="font-weight:600">To &nbsp;&nbsp;&nbsp;<a href="https://wulvxinchen.cn/">导航站</a>
					&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;<a href="https://github.com/drpasserby/XinchenWebTools/issues">反馈</a>
					&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;<a href="./about.html">关于</a></span>
				<a href="./about.html"><img src="https://my.wulvxinchen.cn/pictures/logo/logo.webp"></a>
				<p style="color:#505050;font-weight:600">喜欢可以在
					<a href="https://github.com/drpasserby/XinchenWebTools" style="color:#505050">Github</a>
				给个☆Star！</p>
			</div>
			
			<ul id="webList">
				<div id="popup" v-show="isPopupShow">
					<h3>是否前往</h3>
					<h1>{{weblist[randomweb].name}}</h1>
					<span>{{"(类型:"+weblist[randomweb].type+")"}}</span>
					<div>
						<button id="noToGo" @click="cancelRandom">取消</button>
						<button id="otherToGo" @click="randomWeb()">再换</button>
						<button id="yesToGo" @click="gotoRandom">是的</button>
					</div>
					
				</div>
				
				<div id="random" @click="randomWeb()">
					<h2>随机一站，目前一共有{{webCount}}个网站！</h2>
				</div>
				<li v-for="ele in weblist.slice().reverse()">
					<a :href="ele.src" :title="ele.src" target="_blank">
						<div class="listbox">
							<h1>{{ele.name}}</h1>
							<p>{{ele.type}}</p>
						</div>
					</a>
				</li>
			</ul>
			
		</div>
		<div id="footer">
			
		</div>
		
	</body>
	<script>
	var app =new Vue({
		el:'#webList',
		data:{
			isPopupShow:false,
			randomweb:0,
			weblist:[{type:"Test",name:"找不到对应数据",src:"https://wulvxinchen.cn"}]
		},
		methods:{
			randomWeb:function(){
				this.randomweb=Math.round(Math.random()*this.webCount);
				this.isPopupShow=true;
			},
			cancelRandom:function(){
				this.isPopupShow=false;
			},
			gotoRandom:function(){
				window.location=this.weblist[this.randomweb].src;
				this.isPopupShow=false;
			}
		},
		computed:{
			webCount:function(){
				return this.weblist.length;//总网址数量，自动更新，不需要维护
			},
		},
		beforeCreate:function(){
			axios.get("https://my.wulvxinchen.cn/tools/weblist.json").then((response) => {
				this.weblist=response.data;//从远程获取网站列表。数据来自服务器。
			})
		}
	});
	</script>
</html>
